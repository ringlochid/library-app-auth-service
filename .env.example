# === Database ===
DATABASE_URL=postgresql+asyncpg://user:password@db:5432/your_db_name
ALEMBIC_DATABASE_URL=postgresql+psycopg://user:password@localhost:5432/your_db_name

# === Redis ===
REDIS_URL=redis://redis:6379/0
REDIS_HOST=redis
REDIS_PORT=6379
REDIS_DB=0

# === Token Expiration ===
ACCESS_TOKEN_EXPIRE_MINUTES=15
EMAIL_VERIFY_EXPIRE_MINUTES=10
UNVERIFIED_USER_EXPIRE_DAYS=2
REFRESH_TOKEN_TTL_DAYS=7

# === Cache ===
CACHE_DEFAULT_TTL_SECONDS=900

# === Rate Limiting: Login ===
RATE_LIMIT_LOGIN_CAPACITY=5
RATE_LIMIT_LOGIN_REFILL_TOKENS=5
RATE_LIMIT_LOGIN_REFILL_PERIOD_SECONDS=60

# === Rate Limiting: Register ===
RATE_LIMIT_REGISTER_CAPACITY=3
RATE_LIMIT_REGISTER_REFILL_TOKENS=3
RATE_LIMIT_REGISTER_REFILL_PERIOD_SECONDS=60

# === Rate Limiting: Email Verification ===
RATE_LIMIT_VERIFY_SEND_CAPACITY=5
RATE_LIMIT_VERIFY_SEND_REFILL_TOKENS=5
RATE_LIMIT_VERIFY_SEND_REFILL_PERIOD_SECONDS=300
RATE_LIMIT_VERIFY_DOMAIN_CAPACITY=100
RATE_LIMIT_VERIFY_DOMAIN_REFILL_TOKENS=100
RATE_LIMIT_VERIFY_DOMAIN_REFILL_PERIOD_SECONDS=300
RATE_LIMIT_VERIFY_EMAIL_CAPACITY=3
RATE_LIMIT_VERIFY_EMAIL_REFILL_TOKENS=3
RATE_LIMIT_VERIFY_EMAIL_REFILL_PERIOD_SECONDS=300

# === Rate Limiting: Token Refresh ===
RATE_LIMIT_REFRESH_CAPACITY=30
RATE_LIMIT_REFRESH_REFILL_TOKENS=30
RATE_LIMIT_REFRESH_REFILL_PERIOD_SECONDS=60

# === Rate Limiting: Avatar ===
RATE_LIMIT_AVATAR_UPLOAD_CAPACITY=2
RATE_LIMIT_AVATAR_UPLOAD_REFILL_TOKENS=2
RATE_LIMIT_AVATAR_UPLOAD_REFILL_PERIOD_SECONDS=600
RATE_LIMIT_AVATAR_COMMIT_CAPACITY=4
RATE_LIMIT_AVATAR_COMMIT_REFILL_TOKENS=4
RATE_LIMIT_AVATAR_COMMIT_REFILL_PERIOD_SECONDS=600

# === JWT Configuration ===
JWT_PRIVATE_KEY_PATH=keys/private_key.pem
JWT_PUBLIC_KEY_PATH=keys/public_key.pem
JWT_ALGORITHM=RS256
JWT_ISSUER=auth-service
JWT_AUDIENCE=backend-services

# === Email Verification ===
EMAIL_VERIFY_BASE_URL=http://localhost:8000/auth/verify-email?token=
MAIL_FROM=no-reply@example.com
MAIL_TO=you@example.com

# === Cookies ===
COOKIE_SECURE=false

# === Celery ===
CELERY_BROKER_URL=redis://redis:6379/0
CELERY_RESULT_BACKEND=redis://redis:6379/1
CELERY_TASK_DEFAULT_QUEUE=default
CELERY_TIMEZONE=UTC

# === AWS / S3 ===
AWS_REGION=ap-southeast-2
S3_MEDIA_BUCKET=library-media-demo
S3_MEDIA_REGION=ap-southeast-2

# === Avatar Settings ===
AVATAR_UPLOAD_EXPIRES_SECONDS=1200
AVATAR_MAX_BYTES=2097152
AVATAR_ALLOWED_MIME_TYPES=["image/jpeg","image/png","image/webp"]
AVATAR_MAX_PIXELS=25000000
AVATAR_TARGET_SIZES=[512,256,128,64]
AVATAR_RESIZE_MAX_SIDE=512
AVATAR_UPSCALE_MAX=2.0
AVATAR_OUTPUT_FORMAT=WEBP
AVATAR_JPEG_QUALITY=85

# === ClamAV (Antivirus) ===
CLAMAV_HOST=clamav
CLAMAV_PORT=3310

# === API Security ===
SERVICE_API_KEY=your-secret-api-key
